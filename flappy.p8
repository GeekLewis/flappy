pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
		
	cls()
	map(0,0)
	bird={x=40, y=63, s=1}
	g=.18
	v=0
	t=3.2
	trspd=.5
	trgap=1
	--tree={x=120, yb=32, yt=8}
	forest={}
end

function _update()

	if btnp(❎) or btnp(🅾️) then
		v=v-t
		bird.s=3
	else
	 bird.s=1
	end
	
	for tree in all(forest) do
		tree.x = tree.x-.5
	end
	
	--check if the left most tree
	--if off screen, if so delete
	if forest[1] and forest[1].x <= (-16) then
		del(forest, forest[1])
	end
	
	trgap=trgap-1
	if trgap<=0 then
		coin=(flr(rnd(32)))
		if coin==0 then
			add(forest,gentree())
		end
	end
	
	updatemap()
	v=v+g
	bird.y=bird.y+v
	if bird.y <= 0 then
		bird.y = 0
		v=0
	end
	
end

function _draw()
	map(0, 0, flr(backx),0)
	for tree in all(forest) do
		drawtree(tree)
	end
	spr(bird.s,bird.x,bird.y,2,2)
	print("\#0trees:     ",1,1,7)
	print(#forest,24,1,6)

end
-->8
--tree functions

function drawtree(tree)
	spr(5, tree.x, tree.yb, 2, 2)
	for i=1,(flr(128-tree.yb)/8) do
		spr(21,tree.x,tree.yb+i*8,2,1)
	end	
	spr(37, tree.x,tree.yt, 2,1)
	for i=1,(ceil(tree.yt/8)) do
	 spr(21,tree.x,tree.yt-i*8,2,1)
	end
end

function gentree()
	cut=rnd(78)
	ntree={x=129,yb=(cut+32),yt=(cut+32-(rnd(24)+24))}
	trgap=128
	return ntree
end
-->8
--background
backx=0

function updatemap()
	if (backx<=(-128)) then
		backx=0
 else
 	backx-=.1
 end   
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000555555550000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000055ffffffff5500000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000004000000000000000000000005ffff4444ffff50000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000049000000000000000000000005fff4ffff4fff50000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000499000000000000000000000005ffff4444ffff50000000000000000000000000000000000000000000000000000000000000000000000000
00000000004000499900000000400000000000000555ffffffff5550000000000000000000000000000000000000000000000000000000000000000000000000
000000000004094999996a000004099994996a0005f4555555554550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc0004994999999aa00004999994999aa0054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc0000999999999000000099499499900005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc00000000000000000000004999000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc0000000000000000000000049900000005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc00000000000000000000000049000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc0000000000000000000000000400000005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc00000000000000000000000000000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc0000000000000000000000000000000005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc000000000000000000000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc00000000000000000000000005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc000000000000000000000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccc77777777cccc00000000000000000000000005f4f44444454550000000000000000000000000000000000000000000000000000000000000000000000000
ccc7777777777ccc000000000000000000000000054f444444445450000000000000000000000000000000000000000000000000000000000000000000000000
cccccc77777776cc0000000000000000000000000055f44444455500000000000000000000000000000000000000000000000000000000000000000000000000
cc7777c7777776cc0000000000000000000000000000555555550000000000000000000000000000000000000000000000000000000000000000000000000000
c777777c777776cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c7777777767766cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c777777776c7776c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c77777776c77776c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cc777776cc77766c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc6666cccc666cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2021101010101010101010101010101020211010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3031101010101010101010101010101030311010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010102021101010101010101010101010101020211010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010103031101010101010101010101010101030311010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010202110101010101010101010101010102021101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010303110101010101010101010101010103031101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010102021101010101010101010101010101020211010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010103031101010101010101010101010101030311010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010202110101010101010101010101010102021000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010303110101010101010101010101010103031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
